<?xml version="1.0"?>
<launch>
  <arg name="use_sim_time" default="true"/>
  <arg name="waypoints_file" default="$(find-pkg-share orange_gazebo)/config/waypoints/igvc_waypoints.yaml"/>
  <arg name="params_file" default="$(find-pkg-share orange_navigation)/config/navigation2_params.yaml"/>
  
  <!-- Navigation2 Stack -->
  <include file="$(find-pkg-share nav2_bringup)/launch/navigation_launch.py">
    <arg name="use_sim_time" value="$(var use_sim_time)"/>
    <arg name="params_file" value="$(var params_file)"/>
  </include>
  
  <!-- Waypoint Navigation -->
  <node pkg="waypoint_navigation" exec="waypoint_nav" output="screen" launch-prefix="xterm -e">
    <param name="waypoints_file" value="$(var waypoints_file)"/>
    <param name="world_frame" value="odom"/>
    <param name="robot_frame" value="base_footprint"/>
    <param name="min_dist_err" value="0.5"/>
    <param name="min_yaw_err" value="0.3"/>
    <param name="timeout_restart_nav" value="5.0"/>
    <param name="start_from_middle" value="false"/>
    <param name="use_sim_time" value="$(var use_sim_time)"/>
  </node>
</launch>
